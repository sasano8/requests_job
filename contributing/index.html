
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A next-generation HTTP client for Python.">
      
      
      
      
        <link rel="canonical" href="https://www.python-httpx.org/contributing/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.2">
    
    
      
        <title>Contributing - HTTPX</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1118c9be.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ba0d045b.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@8.0.0/dist/mermaid.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contributing" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href=".." title="HTTPX" class="md-header__button md-logo" aria-label="HTTPX" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HTTPX
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contributing
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="クリア" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/encode/httpx/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    encode/httpx
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HTTPX" class="md-nav__button md-logo" aria-label="HTTPX" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    HTTPX
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/encode/httpx/" title="リポジトリへ" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    encode/httpx
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        はじめに
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        QuickStart
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        Advanced Usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../async/" class="md-nav__link">
        Async Support
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../http2/" class="md-nav__link">
        HTTP/2 Support
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../environment_variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../compatibility/" class="md-nav__link">
        Requests Compatibility
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        Developer Interface
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../third_party_packages/" class="md-nav__link">
        Third Party Packages
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Contributing
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reporting-bugs-or-other-issues" class="md-nav__link">
    Reporting Bugs or Other Issues
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    Development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-and-linting" class="md-nav__link">
    Testing and Linting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documenting" class="md-nav__link">
    Documenting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolving-build-ci-failures" class="md-nav__link">
    Resolving Build / CI Failures
  </a>
  
    <nav class="md-nav" aria-label="Resolving Build / CI Failures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-job-failed" class="md-nav__link">
    Check Job Failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docs-job-failed" class="md-nav__link">
    Docs Job Failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-3x-job-failed" class="md-nav__link">
    Python 3.X Job Failed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#releasing" class="md-nav__link">
    Releasing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-proxy-setup" class="md-nav__link">
    Development proxy setup
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../code_of_conduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reporting-bugs-or-other-issues" class="md-nav__link">
    Reporting Bugs or Other Issues
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    Development
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-and-linting" class="md-nav__link">
    Testing and Linting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documenting" class="md-nav__link">
    Documenting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolving-build-ci-failures" class="md-nav__link">
    Resolving Build / CI Failures
  </a>
  
    <nav class="md-nav" aria-label="Resolving Build / CI Failures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-job-failed" class="md-nav__link">
    Check Job Failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docs-job-failed" class="md-nav__link">
    Docs Job Failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-3x-job-failed" class="md-nav__link">
    Python 3.X Job Failed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#releasing" class="md-nav__link">
    Releasing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-proxy-setup" class="md-nav__link">
    Development proxy setup
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="contributing">Contributing</h1>
<p>Thank you for being interested in contributing to HTTPX.
There are many ways you can contribute to the project:</p>
<ul>
<li>Try HTTPX and <a href="https://github.com/encode/httpx/issues/new">report bugs/issues you find</a></li>
<li><a href="https://github.com/encode/httpx/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22">Implement new features</a></li>
<li><a href="https://github.com/encode/httpx/pulls">Review Pull Requests of others</a></li>
<li>Write documentation</li>
<li>Participate in discussions</li>
</ul>
<h2 id="reporting-bugs-or-other-issues">Reporting Bugs or Other Issues</h2>
<p>Found something that HTTPX should support?
Stumbled upon some unexpected behaviour?</p>
<p>Contributions should generally start out with <a href="https://github.com/encode/httpx/discussions">a discussion</a>.
Possible bugs may be raised as a "Potential Issue" discussion, feature requests may
be raised as an "Ideas" discussion. We can then determine if the discussion needs
to be escalated into an "Issue" or not, or if we'd consider a pull request.</p>
<p>Try to be more descriptive as you can and in case of a bug report,
provide as much information as possible like:</p>
<ul>
<li>OS platform</li>
<li>Python version</li>
<li>Installed dependencies and versions (<code>python -m pip freeze</code>)</li>
<li>Code snippet</li>
<li>Error traceback</li>
</ul>
<p>You should always try to reduce any examples to the <em>simplest possible case</em>
that demonstrates the issue.</p>
<p>Some possibly useful tips for narrowing down potential issues...</p>
<ul>
<li>Does the issue exist on HTTP/1.1, or HTTP/2, or both?</li>
<li>Does the issue exist with <code>Client</code>, <code>AsyncClient</code>, or both?</li>
<li>When using <code>AsyncClient</code> does the issue exist when using <code>asyncio</code> or <code>trio</code>, or both?</li>
</ul>
<h2 id="development">Development</h2>
<p>To start developing HTTPX create a <strong>fork</strong> of the
<a href="https://github.com/encode/httpx">HTTPX repository</a> on GitHub.</p>
<p>Then clone your fork with the following command replacing <code>YOUR-USERNAME</code> with
your GitHub username:</p>
<div class="highlight"><pre><span></span><code>$ git clone https://github.com/YOUR-USERNAME/httpx
</code></pre></div>
<p>You can now install the project and its dependencies using:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">cd</span> httpx
$ scripts/install
</code></pre></div>
<h2 id="testing-and-linting">Testing and Linting</h2>
<p>We use custom shell scripts to automate testing, linting,
and documentation building workflow.</p>
<p>To run the tests, use:</p>
<div class="highlight"><pre><span></span><code>$ scripts/test
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The test suite spawns testing servers on ports <strong>8000</strong> and <strong>8001</strong>.
Make sure these are not in use, so the tests can run properly.</p>
</div>
<p>Any additional arguments will be passed to <code>pytest</code>. See the <a href="https://docs.pytest.org/en/latest/how-to/usage.html">pytest documentation</a> for more information.</p>
<p>For example, to run a single test script:</p>
<div class="highlight"><pre><span></span><code>$ scripts/test tests/test_multipart.py
</code></pre></div>
<p>To run the code auto-formatting:</p>
<div class="highlight"><pre><span></span><code>$ scripts/lint
</code></pre></div>
<p>Lastly, to run code checks separately (they are also run as part of <code>scripts/test</code>), run:</p>
<div class="highlight"><pre><span></span><code>$ scripts/check
</code></pre></div>
<h2 id="documenting">Documenting</h2>
<p>Documentation pages are located under the <code>docs/</code> folder.</p>
<p>To run the documentation site locally (useful for previewing changes), use:</p>
<div class="highlight"><pre><span></span><code>$ scripts/docs
</code></pre></div>
<h2 id="resolving-build-ci-failures">Resolving Build / CI Failures</h2>
<p>Once you've submitted your pull request, the test suite will automatically run, and the results will show up in GitHub.
If the test suite fails, you'll want to click through to the "Details" link, and try to identify why the test suite failed.</p>
<p align="center" style="margin: 0 0 10px">
  <img src="https://raw.githubusercontent.com/encode/httpx/master/docs/img/gh-actions-fail.png" alt='Failing PR commit status'>
</p>

<p>Here are some common ways the test suite can fail:</p>
<h3 id="check-job-failed">Check Job Failed</h3>
<p align="center" style="margin: 0 0 10px">
  <img src="https://raw.githubusercontent.com/encode/httpx/master/docs/img/gh-actions-fail-check.png" alt='Failing GitHub action lint job'>
</p>

<p>This job failing means there is either a code formatting issue or type-annotation issue.
You can look at the job output to figure out why it's failed or within a shell run:</p>
<div class="highlight"><pre><span></span><code>$ scripts/check
</code></pre></div>
<p>It may be worth it to run <code>$ scripts/lint</code> to attempt auto-formatting the code
and if that job succeeds commit the changes.</p>
<h3 id="docs-job-failed">Docs Job Failed</h3>
<p>This job failing means the documentation failed to build. This can happen for
a variety of reasons like invalid markdown or missing configuration within <code>mkdocs.yml</code>.</p>
<h3 id="python-3x-job-failed">Python 3.X Job Failed</h3>
<p align="center" style="margin: 0 0 10px">
  <img src="https://raw.githubusercontent.com/encode/httpx/master/docs/img/gh-actions-fail-test.png" alt='Failing GitHub action test job'>
</p>

<p>This job failing means the unit tests failed or not all code paths are covered by unit tests.</p>
<p>If tests are failing you will see this message under the coverage report:</p>
<p><code>=== 1 failed, 435 passed, 1 skipped, 1 xfailed in 11.09s ===</code></p>
<p>If tests succeed but coverage doesn't reach our current threshold, you will see this
message under the coverage report:</p>
<p><code>FAIL Required test coverage of 100% not reached. Total coverage: 99.00%</code></p>
<h2 id="releasing">Releasing</h2>
<p><em>This section is targeted at HTTPX maintainers.</em></p>
<p>Before releasing a new version, create a pull request that includes:</p>
<ul>
<li><strong>An update to the changelog</strong>:<ul>
<li>We follow the format from <a href="https://keepachangelog.com/en/1.0.0/">keepachangelog</a>.</li>
<li><a href="https://github.com/encode/httpx/compare/">Compare</a> <code>master</code> with the tag of the latest release, and list all entries that are of interest to our users:<ul>
<li>Things that <strong>must</strong> go in the changelog: added, changed, deprecated or removed features, and bug fixes.</li>
<li>Things that <strong>should not</strong> go in the changelog: changes to documentation, tests or tooling.</li>
<li>Try sorting entries in descending order of impact / importance.</li>
<li>Keep it concise and to-the-point. 🎯</li>
</ul>
</li>
</ul>
</li>
<li><strong>A version bump</strong>: see <code>__version__.py</code>.</li>
</ul>
<p>For an example, see <a href="https://github.com/encode/httpx/pull/1006">#1006</a>.</p>
<p>Once the release PR is merged, create a
<a href="https://github.com/encode/httpx/releases/new">new release</a> including:</p>
<ul>
<li>Tag version like <code>0.13.3</code>.</li>
<li>Release title <code>Version 0.13.3</code></li>
<li>Description copied from the changelog.</li>
</ul>
<p>Once created this release will be automatically uploaded to PyPI.</p>
<p>If something goes wrong with the PyPI job the release can be published using the
<code>scripts/publish</code> script.</p>
<h2 id="development-proxy-setup">Development proxy setup</h2>
<p>To test and debug requests via a proxy it's best to run a proxy server locally.
Any server should do but HTTPCore's test suite uses
<a href="https://mitmproxy.org/"><code>mitmproxy</code></a> which is written in Python, it's fully
featured and has excellent UI and tools for introspection of requests.</p>
<p>You can install <code>mitmproxy</code> using <code>pip install mitmproxy</code> or <a href="https://docs.mitmproxy.org/stable/overview-installation/">several
other ways</a>.</p>
<p><code>mitmproxy</code> does require setting up local TLS certificates for HTTPS requests,
as its main purpose is to allow developers to inspect requests that pass through
it. We can set them up follows:</p>
<ol>
<li><a href="https://github.com/sethmlarson/trustme-cli/"><code>pip install trustme-cli</code></a>.</li>
<li><code>trustme-cli -i example.org www.example.org</code>, assuming you want to test
connecting to that domain, this will create three files: <code>server.pem</code>,
<code>server.key</code> and <code>client.pem</code>.</li>
<li><code>mitmproxy</code> requires a PEM file that includes the private key and the
certificate so we need to concatenate them:
<code>cat server.key server.pem &gt; server.withkey.pem</code>.</li>
<li>Start the proxy server <code>mitmproxy --certs server.withkey.pem</code>, or use the
<a href="https://docs.mitmproxy.org/stable/">other mitmproxy commands</a> with different
UI options.</li>
</ol>
<p>At this point the server is ready to start serving requests, you'll need to
configure HTTPX as described in the
<a href="https://www.python-httpx.org/advanced/#http-proxying">proxy section</a> and
the <a href="https://www.python-httpx.org/advanced/#ssl-certificates">SSL certificates section</a>,
this is where our previously generated <code>client.pem</code> comes in:</p>
<div class="highlight"><pre><span></span><code>import httpx

proxies = {&quot;all&quot;: &quot;http://127.0.0.1:8080/&quot;}

with httpx.Client(proxies=proxies, verify=&quot;/path/to/client.pem&quot;) as client:
    response = client.get(&quot;https://example.org&quot;)
    print(response.status_code)  # should print 200
</code></pre></div>
<p>Note, however, that HTTPS requests will only succeed to the host specified
in the SSL/TLS certificate we generated, HTTPS requests to other hosts will
raise an error like:</p>
<div class="highlight"><pre><span></span><code>ssl.SSLCertVerificationError: [SSL: CERTIFICATE_VERIFY_FAILED] certificate
verify failed: Hostname mismatch, certificate is not valid for
&#39;duckduckgo.com&#39;. (_ssl.c:1108)
</code></pre></div>
<p>If you want to make requests to more hosts you'll need to regenerate the
certificates and include all the hosts you intend to connect to in the
seconds step, i.e.</p>
<p><code>trustme-cli -i example.org www.example.org duckduckgo.com www.duckduckgo.com</code></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="フッター">
      
        
        <a href="../third_party_packages/" class="md-footer__link md-footer__link--prev" aria-label="前: Third Party Packages" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                前
              </span>
              Third Party Packages
            </div>
          </div>
        </a>
      
      
        
        <a href="../code_of_conduct/" class="md-footer__link md-footer__link--next" aria-label="次: Code of Conduct" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                次
              </span>
              Code of Conduct
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+", "search.placeholder": "\u691c\u7d22", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.709b4209.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.2b46852b.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@8.0.0/dist/mermaid.min.js"></script>
      
        <script src="../js/chat.js"></script>
      
        <script src="../js/sidecar-1.5.0.js"></script>
      
    
  </body>
</html>